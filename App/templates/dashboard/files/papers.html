{% extends "dashboard/files.html" %}
{% block dashboard_files %}
<div class="container-fluid">
	<div>
		<div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
			<div class="btn-group" role="group" aria-label="First group">
				<button type="button" class="btn btn-outline-success" data-toggle="modal" data-target="#modnew">Send file</button>

			</div>
			<div >
				<form  method="post", enctype="multipart/form-data">
					<input type="hidden" name="form-name" value="search">
					<div class="input-group"><hr>
						<input type="text" class="form-control" placeholder="Year" name="year" value="">
						<input type="text" class="form-control" placeholder="Author" name="author" value="">
						<input type="text" class="form-control" placeholder="Title" name="title" value="">

						<button type="submit" class="btn btn-secondary">Search</button>
					</div>
				</form>
			</div>
		</div><br>
	<table class="table table-striped">
		<thead>
			<tr>
				<th>Author</th>
				<th>Title</th>
				<th>Year</th>
				<th>Options</th>
			</tr>
		</thead>
		<tbody>
			{% for pub in publications %}
			<tr>
				<td>{{pub.author}}</td>
				<td><b><a  href="/dashboard/{{section}}/download/{{pub.id}}">{{pub.title}}</a></b><br><small>{{pub.reference}}</small></td>
				<td>{{pub.year|int}}</td>
				<td>
					<a  type="button" href="/dashboard/edit/paper/{{pub.id}}" class="btn btn-outline-primary btn-sm"><i class="fa fa-edit" style="font-size:15px;color:#008cba"></i></a>
					<button type="button" class="btn btn-outline-danger btn-sm" data-toggle="modal" data-target="#delete{{ pub.id }}"><i class="fa fa-trash" style="font-size:15px;color:red"></i></button>

					<div class="modal fade" id="delete{{ pub.id }}" tabindex="-1" role="dialog" aria-hidden="true">
						<div class="modal-dialog modal-dialog-centered" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="exampleModalCenterTitle">Are you sure?</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
								</div>


								<div class="modal-body">
									<br>The file will be deleted after admin confirmation.
									<a  type="button" href="/dashboard/delete/paper/{{pub.id}}" class="btn btn-outline-danger btn-sm"><i class="fa fa-trash" style="font-size:15px;color:red"></i> Report</a>
								</div>
							</div>
						</div>
					</div>


				</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</div>

<div class="modal fade" id="modnew" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">New file</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form class="was-validated" method="post" enctype="multipart/form-data">
					<input type="hidden" name="form-name" value="add">
					<div class="form-group">
						<label>Title</label>
						<input type="text" class="form-control is-valid form-control-sm" id="validationServer01" placeholder="" name="title" required>
						<div class="invalid-feedback">This field cannot be empty.</div>
					</div>
					<div class="form-row">
						<div class="form-group col-md-6">
							<div class="form-group">
								<label>Author</label>
								<input type="text" class="form-control is-valid form-control-sm" id="validationServer01" placeholder="" name="author" required>
								<div class="invalid-feedback">This field cannot be empty.</div>
							</div>
						</div>
						<div class="form-group col-md-6">
							<div class="form-group">
								<label>Year</label>
								<input type="text" class="form-control is-valid form-control-sm" id="validationServer01" placeholder="" name="year" required>
								<div class="invalid-feedback">This field cannot be empty.</div>
							</div>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-md-6">
							<div class="form-group">
								<label>Reference</label>
								<input type="text" class="form-control is-valid form-control-sm" id="validationServer01" name="ref" placeholder="">
							</div>
						</div>
						<div class="form-group col-md-6">
							<div class="form-group">
								<label>Link</label>
								<input type="text" class="form-control is-valid form-control-sm" id="validationServer01" name="link" placeholder="">
							</div>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-md-6">
							<div class="form-group">
								<label>Description</label>
								<input type="text" class="form-control is-valid form-control-sm" id="validationServer01" name="desc" placeholder="" >
							</div>
						</div>
						<div class="form-group col-md-6">
							<label>Upload</label>
							<div class="custom-file">
								<input type="file" class="custom-file-input" id="validatedCustomFile" name="file">
								<label class="custom-file-label" for="validatedCustomFile">Choose file...</label>
								<div class="invalid-feedback">This field cannot be empty.</div>
							</div>
						</div>
					</div>
					<hr>
					<button type="submit" class="btn btn-primary">Add</button>
				</form>
			</div>
		</div>
	 </div>
</div>
{% endblock %}
